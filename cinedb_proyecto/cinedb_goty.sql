DROP DATABASE IF EXISTS CINEDB_GOTY;
CREATE DATABASE CINEDB_GOTY;
USE CINEDB_GOTY;

CREATE TABLE CATALOGO_GENERO(
    ID_GENERO INT NOT NULL AUTO_INCREMENT,
    NOMBRE VARCHAR(255),
    PRIMARY KEY(ID_GENERO)
);

insert into CATALOGO_GENERO (nombre) values ('Acción'),('Ciencia ficción'),('Comedia'),('Drama'),('Musical'),('Romance'),
('Suspenso'),('Terror'),('Extranjera'),('Documuental'),('Animación'),('Aventura/Fantasía'),('Indie'),('Crimen'),('Fantasía'),('Aventura');

DROP TABLE IF EXISTS CATALOGO_PAISES;
CREATE TABLE CATALOGO_PAISES(
    ID_PAIS INT NOT NULL AUTO_INCREMENT,
    NOMBRE VARCHAR(99),
    SIGLAS VARCHAR(3),
    PRIMARY KEY(ID_PAIS)
);
INSERT INTO CATALOGO_PAISES (NOMBRE,SIGLAS) VALUES ('ESTADOS UNIDOS','EUA'),('MEXICO','MEX'),('JAPON','JAP'),('INGLATERRA','ING');

DROP TABLE IF EXISTS CATALOGO_PRODUCTORA;
CREATE TABLE CATALOGO_PRODUCTORA(
    ID_PRODUCTORA INT NOT NULL AUTO_INCREMENT,
    NOMBRE VARCHAR(255),
    FK_ID_PAIS INT NOT NULL,
    PRIMARY KEY(ID_PRODUCTORA),
    FOREIGN KEY(FK_ID_PAIS) REFERENCES CATALOGO_PAISES(ID_PAIS)
);

INSERT INTO CATALOGO_PRODUCTORA (NOMBRE,FK_ID_PAIS) VALUES ('Marvel Studios',1),('Universal Pictures',1),('Warner Bros. Pictures',1),
('Toei company',3),('Blumhouse Productions',1),('Lions Gate Entertainment',1),('20th Century Fox',1),('Summit Entertainment',1);

CREATE TABLE CATALOGO_ESTADO (
    ID_ESTADO VARCHAR(2) NOT NULL,
    NOMBRE VARCHAR(100)NOT NULL,
    CLAVE VARCHAR(2) NOT NULL,
    PRIMARY KEY(ID_ESTADO) 
);

INSERT INTO CATALOGO_ESTADO (ID_ESTADO, NOMBRE , CLAVE) VALUES ('01', 'Aguascalientes', 'AS'), ('02','Baja California', 'BC'), ('03', 'Baja California Sur', 'BS'), ('04', 'Campeche', 'CC'), ('05', 'Coahuila de Zaragoza', 'CL'), ('06', 'Colima', 'CM'), ('07', 'Chiapas', 'CS'), ('08', 'Chihuahua', 'CH'), 
('09','Disfrito Federal', 'DF'), ('10', 'Durango', 'DG'), ('11', 'Guanajuato', 'GT'), ('12', 'Guerrero', 'GR'), ('13', 'Hidalgo', 'HG'), ('14', 'Jalisco', 'JC'), ('15', 'Estado de Mexico', 'MC'), ('16', 'Michoacan de Ocampo', 'MN'), 
('17', 'Morelos', 'MS'), ('18', 'Nayarit', 'NT'), ('19', 'Nuevo leon', 'NL'), ('20', 'Oaxaca', 'OC'), ('21', 'Puebla', 'PL'), ('22', 'Queretaro de Arteaga', 'QT'), ('23', 'Quintana Roo', 'QR'), ('24', 'San Luis Potosi', 'SP'), 
('25', 'Sinaloa', 'SL'), ('26', 'Sonora', 'SR'), ('27', 'Tabasco', 'TC'), ('28', 'Tamaulipas', 'TS'), ('29', 'Tlaxcala', 'TL'), ('30', 'Veracruz de Ignacio de la Llave', 'VZ'), ('31', 'Yucatán', 'YN'), ('32', 'Zacatecas', 'ZS');

DROP TABLE IF EXISTS CATALOGO_MUNICIPIO;
CREATE TABLE CATALOGO_MUNICIPIO (
    NOMBRE VARCHAR(255),
    FK_ID_ESTADO VARCHAR(2),
    PRIMARY KEY(NOMBRE,FK_ID_ESTADO),
    FOREIGN KEY(FK_ID_ESTADO) REFERENCES CATALOGO_ESTADO(ID_ESTADO)
);

INSERT INTO CATALOGO_MUNICIPIO(NOMBRE, FK_ID_ESTADO) VALUES ('HERMOSILLO','26'),('GUADALAJARA','14'),('MONTERREY','19'),('TIJUANA','02');


DROP TABLE IF EXISTS CATALOGO_TIPO;
CREATE TABLE CATALOGO_TIPO(
    ID_TIPO INT NOT NULL AUTO_INCREMENT,
    TIPO VARCHAR(255),
    PRIMARY KEY(ID_TIPO)
);

INSERT INTO CATALOGO_TIPO (TIPO) VALUES ('4DX'),('MACRO XE'),('IMAX'),('SALA JUNIOR'),('VIP'),('CINEMA PARK'),('VR'),('CINEMARK'),('PLUUS'),('TRADICIONAL');

DROP TABLE IF EXISTS SUCURSAL;
CREATE TABLE SUCURSAL(
    ID_SUCURSAL INT NOT NULL AUTO_INCREMENT,
    NOMBRE VARCHAR(255),
    DIRECCION TEXT,
    APERTURA DATE,
    TELEFONO VARCHAR(255),
    FK_ID_ESTADO VARCHAR(2),
    FK_MUNICIPIO VARCHAR(99) NOT NULL,
    FK_ID_TIPO INT NOT NULL,
    PRIMARY KEY(ID_SUCURSAL),
    FOREIGN KEY(FK_ID_ESTADO) REFERENCES CATALOGO_ESTADO(ID_ESTADO),
    FOREIGN KEY(FK_MUNICIPIO) REFERENCES CATALOGO_MUNICIPIO(NOMBRE),
    FOREIGN KEY(FK_ID_TIPO) REFERENCES CATALOGO_TIPO(ID_TIPO)
);

INSERT INTO SUCURSAL (NOMBRE, DIRECCION, APERTURA, TELEFONO, FK_ID_ESTADO, FK_MUNICIPIO, FK_ID_TIPO) VALUES 
('MISIONES','BULEVAR SOLIDARIDAD, CALLE BELICE PABELLON MISIONES #77','2006-04-11','2-19-65-00','26','HERMOSILLO',10);



CREATE TABLE SALAS(
    ID_SALA INT NOT NULL AUTO_INCREMENT,
    CAPACIDAD INT NOT NULL,
    FK_ID_TIPO INT NOT NULL,
    FK_ID_SUCURSAL INT NOT NULL,
    PRIMARY KEY(ID_SALA),
    FOREIGN KEY(FK_ID_TIPO) REFERENCES CATALOGO_TIPO(ID_TIPO),
    FOREIGN KEY(FK_ID_SUCURSAL) REFERENCES SUCURSAL(ID_SUCURSAL)
);

INSERT INTO SALAS (CAPACIDAD,FK_ID_TIPO,FK_ID_SUCURSAL) VALUES (136,10,1), (136,10,1), (136,10,1), (136,10,1), (136,10,1), (136,10,1), (136,10,1), (48,5,1), (48,5,1), (76,4,1);

DROP TABLE IF EXISTS PERSONAS;
CREATE TABLE PERSONAS(
    NOMBRE VARCHAR(50),
    AP_PATERNO VARCHAR(50),
    AP_MATERNO VARCHAR(50),
    SEXO varchar(1),
    ESTADO VARCHAR(2),
    FECHA_NAC VARCHAR(13)
);



LOAD DATA INFILE 'C:\\Users\\bryan\\Desktop\\personas_data.csv' 
INTO TABLE PERSONAS
FIELDS TERMINATED BY ',' ENCLOSED BY '"' 
LINES TERMINATED BY '\n';

alter table personas add id_persona int auto_increment first, add primary key(id_persona);
alter table personas add TELEFONO varchar(23);
alter table personas add EMAIL varchar(100);
ALTER TABLE PERSONAS ADD FOREIGN KEY(ESTADO) REFERENCES CATALOGO_ESTADO(ID_ESTADO);
ALTER TABLE PERSONAS ADD COLUMN FECHA_NACIMIENTO DATE;

UPDATE PERSONAS SET FECHA_NACIMIENTO = str_to_date(FECHA_NAC,'%d/%m/%Y');
ALTER TABLE PERSONAS DROP FECHA_NAC;
ALTER TABLE PERSONAS ADD EDAD INT;

UPDATE PERSONAS SET EDAD = TIMESTAMPDIFF(YEAR, FECHA_NACIMIENTO, NOW());

drop table if exists CLIENTES;
CREATE TABLE CLIENTES (
    FK_ID_PERSONA INT NOT NULL
);

LOAD DATA INFILE 'C:\\Users\\bryan\\Desktop\\clientes_id.csv' 
INTO TABLE clientes
FIELDS TERMINATED BY ',' ENCLOSED BY '"' 
LINES TERMINATED BY '\n';

alter table CLIENTES add CLIENTES_ID INT AUTO_INCREMENT FIRST, ADD PRIMARY KEY(CLIENTES_ID);
ALTER TABLE CLIENTES ADD FOREIGN KEY(FK_ID_PERSONA) REFERENCES PERSONAS(ID_PERSONA);

DROP TABLE IF EXISTS MEMBRESIAS;
CREATE TABLE MEMBRESIAS( 
    PUNTOS INT DEFAULT 0,
    TIPO ENUM('STANDARD','PREMIUM','VIP','EMPLEADO'),
    FK_ID_CLIENTE INT NOT NULL,
    FECHA_MEMBRESIA VARCHAR(10)
);

LOAD DATA INFILE 'C:\\Users\\bryan\\Desktop\\membresias_data.csv' 
INTO TABLE membresias
FIELDS TERMINATED BY ',' ENCLOSED BY '"' 
LINES TERMINATED BY '\n';

alter table MEMBRESIAS add ID_MEMBRESIA INT AUTO_INCREMENT FIRST, ADD PRIMARY KEY(ID_MEMBRESIA);
ALTER TABLE MEMBRESIAS ADD FOREIGN KEY(FK_ID_CLIENTE) REFERENCES CLIENTE(CLIENTES_ID);
ALTER TABLE MEMBRESIAS ADD COLUMN F_MEMBRESIA DATE;
UPDATE MEMBRESIAS SET F_MEMBRESIA = str_to_date(FECHA_MEMBRESIA,'%d/%m/%Y');
ALTER TABLE membresiasDROP fecha_membresia;

DROP TABLE IF EXISTS EMPLEADOS;
CREATE TABLE EMPLEADOS(
    FECHA_EMPLEADO VARCHAR(10),
    SALARIO DOUBLE DEFAULT 0,
    FK_ID_SUCURSAL INT NOT NULL,
    PUESTO ENUM('GERENTE','GENERAL'),
    ESTATUS ENUM('ACTIVO','INACTIVO'),
    FK_ID_PERSONA INT NOT NULL
);

LOAD DATA INFILE 'C:\\Users\\bryan\\Desktop\\empleados.csv' 
INTO TABLE EMPLEADOS
FIELDS TERMINATED BY ',' ENCLOSED BY '"' 
LINES TERMINATED BY '\n';

alter table EMPLEADOS add ID_EMPLEADO INT AUTO_INCREMENT FIRST, ADD PRIMARY KEY(ID_EMPLEADO);
ALTER TABLE EMPLEADOS ADD FOREIGN KEY(FK_ID_PERSONA) REFERENCES EMPLEADOS(FK_ID_PERSONA);

--FALTAN DATOS--
CREATE TABLE HORARIO(
    ID_HORARIO INT NOT NULL AUTO_INCREMENT,
    FK_ID_EMPLEADO INT NOT NULL,
    ROL ENUM('TAQUILLA','DULCERIA','LIMPIEZA','MANTENIMIENTO','SALA','GERENCIA'),
    HORA_ENTRADA TIME,
    HORA_SALIDA TIME,
    PRIMARY KEY(ID_HORARIO,FK_ID_EMPLEADO),
    FOREIGN KEY(FK_ID_EMPLEADO) REFERENCES EMPLEADOS(ID_EMPLEADO)
);

--CHECAR--
DROP TABLE IF EXISTS PELICULAS;
CREATE TABLE PELICULAS (
ID_PELICULA INT NOT NULL AUTO_INCREMENT,
NOMBRE VARCHAR(255),
DURACION INT,
SINOPSIS TEXT,
FECHA_ESTRENO_MUNDIAL DATE,
FECHA_ESTRENO_CINE DATE,
DIRECTOR varchar(255),
REPARTO VARCHAR(255),
IDIOMA VARCHAR(255),
CLASIFICACION ENUM('AA','A','B','B15','C','D'),
FK_ID_PRODUCTORA INT NOT NULL,
FK_ID_GENERO INT NOT NULL,
PRIMARY KEY(ID_PELICULA),
FOREIGN KEY(FK_ID_PRODUCTORA) REFERENCES CATALOGO_PRODUCTORA(ID_PRODUCTORA),
FOREIGN KEY(FK_ID_GENERO) REFERENCES CATALOGO_GENERO(ID_GENERO)
);

INSERT INTO PELICULAS (NOMBRE,DURACION,SINOPSIS,FECHA_ESTRENO_MUNDIAL,FECHA_ESTRENO_CINE,DIRECTOR,REPARTO,IDIOMA,CLASIFICACION,FK_ID_PRODUCTORA,FK_ID_GENERO) VALUES
('Creed II. La leyenda de Rocky',129,'La vida se ha convertido en un acto de equilibrio para Adonis Creed. Entre sus obligaciones personales y el entrenamiento para su próxima gran pelea, llega el desafío de su vida. ',
'2018-11-21','2019-01-21','STEVEN CAPLE JR.','SILVESTER STALLONE, MICHAEL B. JORDAN','INGLES','B15',3,4),
('Aquaman',139,'La película cuenta la historia del origen de Arthur Curry, mitad humano y mitad atlante, que emprenderá el viaje de su vida.',
'2018-12-21','2019-01-21','JAMES WAN','JASON MOMOA, AMBER HEARD','INGLES','B',3,1),
('Spider-Man: Un nuevo universo',117, 'presenta a Miles Morales, un adolescente de Brooklyn, y las ilimitadas posibilidades del Universo Spider-Man, donde más de uno puede llevar la máscara.',
'2018-12-14','2019-01-21','Bob Persichetti','Nicolas Cage, Shameik Moore, Jake Johnson','INGLES','AA',1,11),
('Dragon Ball Super: Broly',100,'La Tierra disfruta en paz la celebración de el Torneo del Poder. Sin embargo, Goku es consciente de que existen enemigos aún por descubrir en el Universo, por lo que sigue entrenando sin descanso para alcanzar cotas de poder nunca antes conocidas en un superguerrero.',
'2019-01-16','2019-01-21','Tatsuya Nagamine','Sean Schemmel, Christopher Sabat','JAPONES','B',3,11),
('Avengers: Endgame', 182, 'El grave desenlace de los acontecimientos provocados por Thanos, que acabó con la mitad del universo y parte de Los Vengadores, obliga a aquellos Súper Héroes que sobrevivieron a tomar una firme posición en AVENGERS: ENDGAME.',
'2019-04-24','2018-04-27', 'ANTHONY RUSSO, JOE RUSSO', 'CHRIS EVANS, ROBERT DOWNEY JR., SCARLETT JOHANSON', 'INGLES', 'B', 1, 1),
('Nosotros', 117, 'Una madre y un padre llevan a sus hijos a su casa en la playa esperando disfrutar del tiempo con sus amigos, pero su serenidad se convierte en tensión y caos cuando algunos visitantes llegan sin ser invitados.',
 '2019-03-22', '2019-04-08', 'JORDAN PEELE', 'JORDAN PEELE, LUPITA NYONG\'O, ELISABETH MOSS, WINSTON DUKE', 'INGLES', 'B15', 5, 8),
('No Manches Frida 2', 103, 'Zequi (Omar Chaparro) y Lucy (Martha Higareda) están a punto de casarse y decimos a punto, ya que Zequi después de su despedida de soltero llega en tan mal estado a la boda, que en lugar de dar el sí termina vomitando, razón por la que Lucy decide terminar con él. Esto sucede al mismo tiempo en que el Instituto Frida Kahlo es invitado a unos juegos interescolares en la playa. Zequi piensa que este viaje es el pretexto perfecto para reconquistar a su amada, pero no cuenta con que Lucy se reencontrará con un viejo amor, quien dicho sea de paso, ha perdido algunos kilos y se ha convertido en un gran galán. Ahora Zequi no solamente tendrá que ganar la competencia de baile interescolar, sino que también de nuevo el corazón de Lucy.', 
'2019-04-15', '2019-04-15', 'NACHO G. VELILLA', 'MARTHA HIGAREDA, OMAR CHAPARRO, AARON DIAZ, ITATI CANTORAL', 'ESPAÑOL', 'B15', 6, 3),
('Un Amor Inquebrantable', 116, 'UN AMOR INQUEBRANTABLE está basada en la increíble historia verdadera del amor resuelto de una madre frente a probabilidades imposibles. Cuando John, hijo adoptado de Joyce Smith, se cae a través de un lago cubierto de hielo en Missouri, toda esperanza parece perdida. Pero mientras John yace inerte, Joyce se rehúsa a darse por vencida. Su inalterable fe inspira a todos a su alrededor.',
 '2019-04-17', '2019-04-18', 'ROXANN DAWSON', 'TOPHER GRACE, CHRISSY METZ, DENNIS HAYSBERT, LISA DURUPT, JOSH LUCAS, MIKE COLTER', 'INGLES', 'A', 7, 4),
('Ni En Sueños', 125, 'El periodista político Fred Flarsky se reencuentra con su ex-niñera y chica de sus sueños, Charlotte Field, ahora una humanitaria, trotamundos y renombrada diplomática de Estados Unidos. Fred acepta ir con Charlotte a un viaje por el mundo; después de una noche desenfrenada en París la vida privada de Charlotte se volverá pública y su carrera política se verá en peligro.', 
'2019-04-09', '2019-04-09', 'JOHNATHAN LEVINE', 'CHARLIZE THERON, SETH ROGEN, ANDY SERKINS', 'INGLES', 'B15', 8, 3);

CREATE TABLE FUNCIONES(
    ID_FUNCION INT NOT NULL AUTO_INCREMENT,
    FECHA_FUNCION DATE,
    HORA_INICIO TIME,
    FORMATO  ENUM('2D','3D'),
    LENGUAJE VARCHAR(255),
    SUBTITULOS BOOLEAN NOT NULL DEFAULT 0,
    ASIENTOS_DISPONIBLES INT DEFAULT 136,
    FK_ID_PELICULA INT NOT NULL,
    FK_ID_SALA INT NOT NULL,
    FK_ID_SUCURSAL INT NOT NULL,
    PRIMARY KEY(ID_FUNCION),
    FOREIGN KEY(FK_ID_PELICULA) REFERENCES PELICULAS(ID_PELICULA),
    FOREIGN KEY(FK_ID_SALA) REFERENCES SALAS(ID_SALA),
    FOREIGN KEY(FK_ID_SUCURSAL) REFERENCES SUCURSAL(ID_SUCURSAL)
);

INSERT INTO FUNCIONES (FECHA_FUNCION, HORA_INICIO, FORMATO, LENGUAJE, SUBTITULOS, FK_ID_PELICULA, FK_ID_SALA, FK_ID_SUCURSAL) VALUES 
('2019-05-07', '13:50:00', '2D', 'INGLES', 1, 5, 1, 1),  ('2019-05-07', '16:50:00', '2D', 'INGLES', 1, 5, 2, 1),  ('2019-05-07', '17:00:00', '2D', 'INGLES', 1, 5, 3, 1),  
('2019-05-07', '17:30:00', '2D', 'INGLES', 1, 5, 4, 1),  ('2019-05-07', '20:50:00', '2D', 'INGLES', 1, 5, 1, 1),  ('2019-05-07', '21:20:00', '2D', 'INGLES', 1, 5, 2, 1),
('2019-05-07', '20:30:00', '3D', 'INGLES', 1, 5, 6, 1),  ('2019-05-07', '22:20:00', '3D', 'ESPANOL', 0, 5, 7, 1), ('2019-05-07', '13:50:00', '2D', 'INGLES', 1, 5, 1, 1),
('2019-05-07', '16:10:00', '2D', 'ESPANOL', 0, 5, 1, 4), ('2019-05-07', '20:20:00', '2D', 'ESPANOL', 0, 5, 1, 4);    -- AVENGERS    
-- 0 ES FALSO, 1 ES VERDADERO


drop table if exists VENTA_BOLETOS;
CREATE TABLE VENTA_BOLETOS(
ID_VENTA INT NOT NULL AUTO_INCREMENT,
FECHA_VENTA date,
hora time,
SUB_TOTAL DOUBLE NOT NULL,
TOTAL DOUBLE NOT NULL,
FK_ID_FUNCION INT NOT NULL,
CANTIDAD_BOLETOS INT,
MEMBRESIA BOOLEAN DEFAULT 0,
FK_ID_EMPLEADO INT,
PRIMARY KEY(ID_VENTA),
FOREIGN KEY(FK_ID_EMPLEADO) REFERENCES EMPLEADOS(ID_EMPLEADO),
FOREIGN KEY(FK_ID_FUNCION) REFERENCES FUNCIONES(ID_FUNCION)
);

INSERT INTO VENTA_BOLETOS(FECHA_VENTA, HORA, SUB_TOTAL, TOTAL, FK_ID_FUNCION, CANTIDAD_BOLETOS, MEMBRESIA, FK_ID_EMPLEADO) VALUES 
('2019-05-07', '13:00:00', 0, 0, 1, 1, 0, 367040),('2019-05-07', '13:00:00', 0, 0, 1, 2, 1, 367040),('2019-05-07', '13:00:00', 0, 0, 1, 4, 0, 367040),
('2019-05-07', '12:00:00', 0, 0, 1, 2, 0, 367040),('2019-05-07', '11:00:00', 0, 0, 1, 6, 0, 367040),('2019-05-07', '09:00:00', 0, 0, 1, 2, 1, 367040),
('2019-05-07', '12:00:00', 0, 0, 1, 3, 1, 367040),('2019-05-07', '10:00:00', 0, 0, 1, 8, 1, 367040),('2019-05-07', '11:00:00', 0, 0, 1, 1, 0, 367040),
('2019-05-07', '13:40:00', 0, 0, 1, 4, 0, 367040),('2019-05-07', '11:20:00', 0, 0, 1, 3, 0, 367040),('2019-05-07', '12:00:00', 0, 0, 1, 5, 0, 367040),
('2019-05-07', '13:30:00', 0, 0, 1, 5, 1, 367040),('2019-05-07', '13:25:00', 0, 0, 1, 1, 0, 367040),('2019-05-07', '13:20:00', 0, 0, 1, 5, 0, 367040), -- FUNCION 1
('2019-05-07', '16:50:00', 0, 0, 2, 5, 1, 367040),('2019-05-07', '15:35:00', 0, 0, 2, 2, 1, 367040),('2019-05-07', '12:50:00', 0, 0, 2, 2, 1, 367040),
('2019-05-07', '13:10:00', 0, 0, 2, 2, 0, 367040),('2019-05-07', '14:20:00', 0, 0, 2, 2, 1, 367040),('2019-05-07', '14:40:00', 0, 0, 2, 5, 0, 367040),
('2019-05-07', '12:30:00', 0, 0, 2, 1, 0, 367040),('2019-05-07', '14:10:00', 0, 0, 2, 6, 1, 367040),('2019-05-07', '14:00:00', 0, 0, 2, 10, 1, 367040),
('2019-05-07', '13:20:00', 0, 0, 2, 2, 1, 367040),('2019-05-07', '15:25:00', 0, 0, 2, 8, 1, 367040),('2019-05-07', '15:12:00', 0, 0, 2, 8, 0, 367040),
('2019-05-07', '14:50:00', 0, 0, 2, 2, 0, 367040),('2019-05-07', '11:45:00', 0, 0, 2, 10, 1, 367040),('2019-05-07', '16:13:00', 0, 0, 2, 4, 0, 367040);


drop table if exists proveedores;
CREATE TABLE PROVEEDORES(
    ID_PROVEEDOR INT NOT NULL AUTO_INCREMENT,
    NOMBRE VARCHAR(255),
    TELEFONO VARCHAR(50),
    FK_ID_ESTADO INT NOT NULL,
    DIRECCION TEXT, 
    CODIGO_POSTAL VARCHAR(10),
    PRIMARY KEY(ID_PROVEEDOR),
    FOREIGN KEY(FK_ID_ESTADO) REFERENCES CATALOGO_ESTADO(ID_ESTADO)

);

INSERT INTO PROVEEDORES (NOMBRE,TELEFONO,FK_ID_ESTADO,DIRECCION,CODIGO_POSTAL) VALUES
('COCA-COLA Femsa Los Angeles - Cedis Sur','01-554-313-2614',09,'Anillo Perif. 101, Los Ángeles Apanoaya', '09710'),
('Helados Holanda','01-800-710-9199',09,'Av Morelos Ote 359, Centro','15500'),
('HERSHEY MÉXICO S.A. DE C.V.','01-800-956-9964',14,'CARR. GUADALAJARA - EL CASTILLO KM 8.05','45680'),
('Mars Wrigley Confectionery México','01-800-342-6621',23,'Carretera A Chichimequillas Km 4.5','76260'),
('Mondelez','01-555-729-2800',09,'Avenida Victoria Oriente 5840, Tres Estrellas','07820'),
('Icee de México S.A. de C.V.','01-555-243-1731',09,'Av. Presidentes 52, Portales Nte','03300'),
('PepsiCo','01-55-2582-3000',09,'Bosque de Duraznos 67, Bosque de las Lomas','11700'),
('Conagra Foods Mexico, S.A. De C.V.','01-555-340-4423',09,'Colonia Del Vale 615, Col del Valle Centro','03100'),
('Grupo Herdez','01-555-201-5655',09,'Monte Pelvoux 215, Lomas - Virreyes, Lomas de Chapultepec','11000'),
('Heinz México','01-333-001-3800',14,'Anillo Perif. Sur Manuel Gómez Morín 7980, Santa María Tequepexpan','45080'),
('GRUPO MODELO','01-559-138-9990',09,'Av. Tlahuac 4522, Lomas Estrella 2da Secc','09890'),
('Cerveceria Cuauhtémoc S.A. de C.V.','01-818-335-4414',19,'Gustavo Díaz Ordaz 320, Cuatro de Octubre','64650'),
('Proveedor de vinos y destilados','01-800-333-4444',14,'dirección de viñería y destilería','45650'),
('Caffenio',' 01-555-361-9014',09,'Dibujantes 170, El Triunfo, Ciudad de México','09430'),
('Distribuidora de ingredientes',' 01-555-555-555',09,'Dirección de la distribuidora de los ingredientes para los platillos del menú','09430');

INSERT INTO PROVEEDORES (NOMBRE,TELEFONO,FK_ID_ESTADO,DIRECCION,CODIGO_POSTAL) VALUES
('CINEPOLIS','01-432-343-7542',09,'Dirección de cinepolis', '09711');

drop table CATALOGO_MARCAS;
CREATE TABLE CATALOGO_MARCAS(
    ID_MARCA INT NOT NULL AUTO_INCREMENT,
    NOMBRE VARCHAR(255),
    FK_ID_PROVEEDOR INT NOT NULL,
    PRIMARY KEY(ID_MARCA),
    FOREIGN KEY(FK_ID_PROVEEDOR) REFERENCES PROVEEDORES(ID_PROVEEDOR)
);

INSERT INTO CATALOGO_MARCAS(NOMBRE,FK_ID_PROVEEDOR) VALUES ('COCA-COLA',1),('COCA-COLA ZERO',1),('CIEL',1),('SPRITE',1),('FANTA',1),('HOLANDA',2),
('HERSEY',3),('SNICKERS',4),('SKITTLES',4),('M&M',4),('NABISCO',5),('ICEE',6),('TOSTITOS',7),('SABRITAS',7),('STARBUCKS',7),('CHEETOS',7),
('7UP',7),('RUFFLES',7),('DORITOS',7),('ACT II',8),('DEL MONTE',8),('HUNTS',8),('HEINZ',9),('MODELO',10),('CORONA',10),('INDIO',11),('CARTA BLANCA',11),
('TECATE',11),('HEINEKEN',11),('SOL',11),('XX',11),('AMSTEL',11),('VINO',12),('DESTILADO',13),('COCTELES',13),('CAFFENIO',14),('INGEDIENTE',15),('CINEPOLIS',16);




/*DROP TABLE IF EXISTS PRODUCTOS;
CREATE TABLE PRODUCTOS(
    ID_PRODUCTO INT NOT NULL AUTO_INCREMENT,
    NOMBRE VARCHAR(255),
    DESCRIPCION TEXT,
    DIVISION ENUM('DULCERIA','CAFETERIA','VIP'),
    CANTIDAD INT DEFAULT 0,
    TAMANO_CAPACIDAD ENUM('CH','M','G','600ML','1L','1 PIEZA','2 PIEZAS','PLATO','COPA','SENCILLO','DOBLE','CORTADO SENCILLO','CORTADO DOBLE'),
    PRECIO DOUBLE DEFAULT 0,
    CATEGORIA ENUM('ENSALADAS','PASTAS','SUSHI','SNACKS','DELI','CREPAS','REPOSTERÍA','CAFÉ','BAR','BEBIDAS','CLÁSICOS'),
    FK_ID_MARCA INT,
    FK_ID_SUCURSAL INT,
    PRIMARY KEY(ID_PRODUCTO),
    FOREIGN KEY(FK_ID_MARCA) REFERENCES CATALOGO_MARCAS(ID_MARCA),
    FOREIGN KEY(FK_ID_SUCURSAL) REFERENCES SUCURSAL(ID_SUCURSAL)
);*/

drop table if exists CATALOGO_SABORES;
CREATE TABLE CATALOGO_SABORES (
    ID_SABOR INT NOT NULL AUTO_INCREMENT,
    NOMBRE VARCHAR(255),
    PRIMARY KEY(ID_SABOR)
);

drop table if exists productos;
DROP TABLE IF EXISTS PRODUCTOS;
CREATE TABLE PRODUCTOS(
    ID_PRODUCTO INT NOT NULL AUTO_INCREMENT,
    NOMBRE VARCHAR(255),
    DESCRIPCION TEXT,
    FK_ID_SABOR INT NOT NULL,
    DIVISION ENUM('DULCERIA','CAFETERIA','VIP'),
    TAMANO_CAPACIDAD ENUM('CH','M','G','J','600ML','1L','PIEZA','PLATO','COPA','SENCILLO','DOBLE','CORTADO SENCILLO','CORTADO DOBLE'
    ,'COMBO','MAXICOMBO'),
    PRECIO DOUBLE DEFAULT 0,
    CATEGORIA ENUM('ENSALADAS','PASTAS','SUSHI','SNACKS','DELI','CREPAS','REPOSTERÍA','CAFÉ','BAR','BEBIDAS','PALOMITAS','CLÁSICOS','INGREDIENTE'),
    FK_ID_MARCA INT,
    FK_ID_SUCURSAL INT,
    PRIMARY KEY(ID_PRODUCTO),
    FOREIGN KEY(FK_ID_MARCA) REFERENCES CATALOGO_MARCAS(ID_MARCA),
    FOREIGN KEY(FK_ID_SABOR) REFERENCES CATALOGO_SOBRES(ID_SABOR)
);

INSERT INTO CATALOGO_SABORES (NOMBRE) VALUES ('MANTQUEILLA'),('ENCHILADAS'),('CARAMELO'),('MIX'),('FRESA'),('COLA'),('AGUA'),('LIMON'),('LIGHT'),('CEREZA'),
('CHOCOLATE'),('FRAMBUESA AZUL'),('MANGO'),('FRESA'),('UVA'),('OTRO'),('NARAJA'),('MANGO'),('ZARZAMORA'),('VAINILLA'),('CARAMELO'),('CHOCLATE BLANCO'),('COOCKIES & CREAM');

drop table ALMACEN;
CREATE TABLE ALMACEN(
    ID_ALMACEN INT NOT NULL AUTO_INCREMENT,
    CANTIDAD INT DEFAULT 0,
    FK_ID_PRODUCTO INT,
    FK_ID_SUCURSAL INT,
    PRIMARY KEY(ID_ALMACEN,FK_ID_PRODUCTO,FK_ID_SUCURSAL),
    FOREIGN KEY(FK_ID_PRODUCTO) REFERENCES PRODUCTOS(ID_PRODUCTO),
    FOREIGN KEY(FK_ID_SUCURSAL) REFERENCES SUCURSAL(ID_SUCURSAL)
);
INSERT INTO ALMACEN (CANTIDAD,FK_ID_PRODUCTO,FK_ID_SUCURSAL) VALUES (1000,2,1);

DROP TABLE INVENTARIO;
CREATE TABLE INVENTARIO(
    ID INT NOT NULL AUTO_INCREMENT,
    FK_ID_SUCURSAL INT NOT NULL,
    FK_ID_PRODUCTO INT,
    CANTIDAD INT DEFAULT 0,
    PRIMARY KEY(ID, FK_ID_SUCURSAL, FK_ID_PRODUCTO),
    FOREIGN KEY (FK_ID_SUCURSAL) REFERENCES SUCURSAL(ID_SUCURSAL),
    FOREIGN KEY (FK_ID_PRODUCTO) REFERENCES PRODUCTOS(ID_PRODUCTO)
);

INSERT INTO INVENTARIO (FK_ID_SUCURSAL, FK_ID_PRODUCTO, CANTIDAD) VALUES (1,1,1000);

INSERT INTO PRODUCTOS (NOMBRE,DESCRIPCION,FK_ID_SABOR, DIVISION,TAMANO_CAPACIDAD,PRECIO,CATEGORIA,FK_ID_MARCA) VALUES
('PALOMITAS','PALOMITAS DE MAÍZ CHICAS',1,'DULCERIA','CH',30.00,'PALOMITAS',8),
('PALOMITAS','PALOMITAS DE MAÍZ MEDIANAS',1,'DULCERIA','M',40.00,'PALOMITAS',8),
('PALOMITAS','PALOMITAS DE MAÍZ GRANDES',1,'DULCERIA','G',50.00,'PALOMITAS',8),
('PALOMITAS','PALOMITAS DE MAÍZ CHICAS',2,'DULCERIA','CH',30.00,'PALOMITAS',8),
('PALOMITAS','PALOMITAS DE MAÍZ MEDIANAS',2,'DULCERIA','M',40.00,'PALOMITAS',8),
('PALOMITAS','PALOMITAS DE MAÍZ GRANDES',2,'DULCERIA','G',50.00,'PALOMITAS',8),
('PALOMITAS','PALOMITAS DE MAÍZ CHICAS',3,'DULCERIA','CH',30.00,'PALOMITAS',8),
('PALOMITAS','PALOMITAS DE MAÍZ MEDIANAS',3,'DULCERIA','M',40.00,'PALOMITAS',8),
('PALOMITAS','PALOMITAS DE MAÍZ GRANDES',3,'DULCERIA','G',50.00,'PALOMITAS',8),
('PALOMITAS','PALOMITAS DE MAÍZ CHICAS',4,'DULCERIA','CH',30.00,'PALOMITAS',8),
('PALOMITAS','PALOMITAS DE MAÍZ MEDIANAS',4,'DULCERIA','M',40.00,'PALOMITAS',8),
('PALOMITAS','PALOMITAS DE MAÍZ GRANDES',4,'DULCERIA','G',50.00,'PALOMITAS',8),
('PALOMITAS','PALOMITAS DE MAÍZ CHICAS',9,'DULCERIA','CH',30.00,'PALOMITAS',8),
('PALOMITAS','PALOMITAS DE MAÍZ MEDIANAS',9,'DULCERIA','M',40.00,'PALOMITAS',8),
('PALOMITAS','PALOMITAS DE MAÍZ GRANDES',9,'DULCERIA','G',50.00,'PALOMITAS',8),
('REFRESCO','REFRESCO TAMAÑO CHICO',6,'DULCERIA','CH',20.00,'BEBIDAS',1),
('REFRESCO','REFRESCO TAMAÑO MEDIANO',6,'DULCERIA','M',30.00,'BEBIDAS',1),
('REFRESCO','REFRESCO TAMAÑO GRANDE',6,'DULCERIA','G',40.00,'BEBIDAS',1),
('REFRESCO','REFRESCO TAMAÑO JUMBO',6,'DULCERIA','J',50.00,'BEBIDAS',1),
('REFRESCO','REFRESCO TAMAÑO CHICO',5,'DULCERIA','CH',20.00,'BEBIDAS',1),
('REFRESCO','REFRESCO TAMAÑO MEDIANO',5,'DULCERIA','M',30.00,'BEBIDAS',1),
('REFRESCO','REFRESCO TAMAÑO GRANDE',5,'DULCERIA','G',40.00,'BEBIDAS',1),
('REFRESCO','REFRESCO TAMAÑO JUMBO',5,'DULCERIA','J',50.00,'BEBIDAS',1),
('REFRESCO','REFRESCO TAMAÑO CHICO',8,'DULCERIA','CH',20.00,'BEBIDAS',1),
('REFRESCO','REFRESCO TAMAÑO MEDIANO',8,'DULCERIA','M',30.00,'BEBIDAS',1),
('REFRESCO','REFRESCO TAMAÑO GRANDE',8,'DULCERIA','G',40.00,'BEBIDAS',1),
('REFRESCO','REFRESCO TAMAÑO JUMBO',8,'DULCERIA','J',50.00,'BEBIDAS',1),
('REFRESCO','REFRESCO TAMAÑO CHICO',9,'DULCERIA','CH',20.00,'BEBIDAS',1),
('REFRESCO','REFRESCO TAMAÑO MEDIANO',9,'DULCERIA','M',30.00,'BEBIDAS',1),
('REFRESCO','REFRESCO TAMAÑO GRANDE',9,'DULCERIA','G',40.00,'BEBIDAS',1),
('REFRESCO','REFRESCO TAMAÑO JUMBO',9,'DULCERIA','J',50.00,'BEBIDAS',1),
('NACHOS','NACHOS CON QUESO Y JALAPEÑO',16,'DULCERIA','M',40.00,'CLÁSICOS',13),
('NACHOS GRANDES','NACHOS CON QUESO Y JALAPEÑO GRANDES',15,'DULCERIA','G',70.00,'CLÁSICOS',13),
('HOT DOG','HOT DOG TRADICIONAL',16,'DULCERIA','PIEZA',30.00,'CLÁSICOS',38),
('HOT DOG JUMBO','HOT DOG TRADICIONAL JUMBO',16,'DULCERIA','PIEZA',40.00,'CLÁSICOS',38),
('PALETA CORNETTO','PALETA DE CHOCOCOLATE',11,'DULCERIA','PIEZA',30.00,'CLÁSICOS',6),
('PALETA MAGNUM','PALETA DE CHOCOLATE',11,'DULCERIA','PIEZA',30.00,'CLÁSICOS',6),
('CHOCOLATE HERSEY','BARRA DE CHOCOLATE',11,'DULCERIA','PIEZA',20.00,'CLÁSICOS',7),
('CHOCOLATE HERSEY','BARRA DE CHOCOLATE',23,'DULCERIA','PIEZA',20.00,'CLÁSICOS',7),
('M&M','CACAHUATES DE CHOCOLATE',11,'DULCERIA','PIEZA',20.00,'CLÁSICOS',10),
('EXPRESSO','CAFÉ EXPRESSO',16,'CAFETERIA','SENCILLO',30.00,'CAFÉ',14),
('EXPRESSO','CAFÉ EXPRESSO',16,'CAFETERIA','DOBLE',35.00,'CAFÉ',14),
('EXPRESSO','CAFÉ EXPRESSO',16,'CAFETERIA','CORTADO SENCILLO',40.00,'CAFÉ',14),
('EXPRESSO','CAFÉ EXPRESSO',16,'CAFETERIA','CORTADO DOBLE',45.00,'CAFÉ',14),
('EXPRESSO','CAFÉ EXPRESSO',16,'CAFETERIA','CORTADO DOBLE',45.00,'CAFÉ',14),
('EXPRESSO','CAFÉ EXPRESSO',16,'CAFETERIA','CORTADO DOBLE',45.00,'CAFÉ',14),
('AMERICANO','CAFÉ AMERICANO',16,'CAFETERIA','CH',25.00,'CAFÉ',14),
('AMERICANO','CAFÉ AMERICANO',16,'CAFETERIA','M',30.00,'CAFÉ',14),
('AMERICANO','CAFÉ AMERICANO',16,'CAFETERIA','G',35.00,'CAFÉ',14),
('LATTE','CAFÉ LATTE',16,'CAFETERIA','CH',25.00,'CAFÉ',14),
('LATTE','CAFÉ LATTE',16,'CAFETERIA','M',30.00,'CAFÉ',14),
('LATTE','CAFÉ LATTE',16,'CAFETERIA','G',35.00,'CAFÉ',14),
('MOKA','CAFÉ MOKA',16,'CAFETERIA','CH',25.00,'CAFÉ',14),
('MOKA','CAFÉ MOKA',16,'CAFETERIA','M',30.00,'CAFÉ',14),
('MOKA','CAFÉ MOKA',16,'CAFETERIA','G',35.00,'CAFÉ',14),
('CAPUCCINO','CAFÉ CAPUCINNO',16,'CAFETERIA','CH',25.00,'CAFÉ',14),
('CAPUCCINO','CAFÉ CAPUCINNO',16,'CAFETERIA','M',30.00,'CAFÉ',14),
('CAPUCINNO','CAFÉ CAPUCINNO',16,'CAFETERIA','G',35.00,'CAFÉ',14),
('BROWNIE','BROWNIE DE CHOCOLATE',11,'CAFETERIA','PIEZA',35.00,'REPOSTERÍA',38),
('PASTEL','PASTEL DE CHOCOLATE',11,'CAFETERIA','PIEZA',40.00,'REPOSTERÍA',38),
('CHEESE CAKE','PASTEL DE QUESO',16,'CAFETERIA','PIEZA',35.00,'REPOSTERÍA',38);


/*INSERT INTO PRODUCTOS (NOMBRE,DESCRIPCION,DIVISION,TAMANO_CAPACIDAD,PRECIO,CATEGORIA,FK_ID_MARCA, FK_ID_SUCURSAL) VALUES
('COMBO CUATES','2 REFRESCOS GRANDES, 1 PALOMITAS GRANDES DE MANTQUILLA','DULCERIA','COMBO',179.00,'CLÁSICOS',16),
('COMBO CLASICO','1 HOT DOG, 1 REFRESCO GRANDE, 1 PALOMITAS GRANDES DE MANTQUILLA','DULCERIA','COMBO',199.00,'CLÁSICOS',16),
('COMBO NACHOS','1 NACHOS, 1 REFRESCO GRANDE, 1 PALOMITAS GRANDES DE MANTQUILLA','DULCERIA','COMBO',189.00,'CLÁSICOS',16),
('COMBO M&M','1 M&M, 1 REFRESCO GRANDE, 1 PALOMITAS GRANDES DE MANTQUILLA','DULCERIA','COMBO',159.00,'CLÁSICOS',16),
('COMBO ICEE','2 ICEE, 1 PALOMITAS GRANDES DE MANTQUILLA','DULCERIA','COMBO',149.00,'CLÁSICOS',16),
('COMBO HERSEY','1 CHOCOLATE HERSEY, 1 PALOMITAS GRANDES DE MANTQUILLA','DULCERIA','COMBO',139.00,'CLÁSICOS',16),
('MAXICOMBO NACHOS','2 NACHOS, 2 REFRESCOS GRANDES, 1 PALOMITAS GRANDES DE MANTEQUILLA','DULCERIA','MAXICOMBO',279.00,'CLÁSICOS',16),
('MAXICOMBO HOT DOG','2 HOT DOGS, 2 REFRESCOS GRANDES, 1 PALOMITAS GRANDES DE MANTEQUILLA','DULCERIA','MAXICOMBO',279.00,'CLÁSICOS',16),
('MAXICOMBO MIX','1 HOT DOG, 1 NACHOS, 2 REFRESCOS GRANDES, 1 PALOMITAS GRANDES DE MANTEQUILLA','DULCERIA','MAXICOMBO',299.00,'CLÁSICOS',16),*/


--AQUI ME QUEDÉ  
DROP TABLE IF EXISTS DESCRIPCION_VENTAS;
CREATE TABLE DESCRIPCION_VENTAS(
    ID_DESCRIPCION_VENTA INT NOT NULL,
    FK_ID_PRODUCTO INT NOT NULL,
    UNIDADES INT NOT NULL DEFAULT 0,
    FK_ID_SUCURSAL int,
    PRIMARY KEY(ID_DESCRIPCION_VENTA,FK_ID_PRODUCTO,FK_ID_SUCURSAL),
    FOREIGN KEY(FK_ID_PRODUCTO) REFERENCES PRODUCTOS(ID_PRODUCTO),
    FOREIGN KEY(FK_ID_SUCURSAL) REFERENCES SUCURSAL(ID_SUCURSAL)
);

INSERT INTO DESCRIPCION_VENTAS VALUES (1,1,4,1);

DROP TABLE IF EXISTS VENTAS;
CREATE TABLE VENTAS(
    ID_VENTA INT NOT NULL AUTO_INCREMENT,
    FECHA_VENTA TIMESTAMP,
    SUB_TOTAL DOUBLE NOT NULL DEFAULT 0,
    TOTAL DOUBLE NOT NULL DEFAULT 0,
    FK_ID_EMPLEADO INT NOT NULL,
    FK_ID_DESCRIPCION_VENTAS INT NOT NULL,
    MEMBRESIA BOOLEAN,
    FK_ID_SUCURSAL INT,
    PRIMARY KEY(ID_VENTA),
    FOREIGN KEY(FK_ID_DESCRIPCION_VENTAS) REFERENCES DESCRIPCION_VENTAS(ID_DESCRIPCION_VENTA),
    FOREIGN KEY(FK_ID_EMPLEADO) REFERENCES EMPLEADOS(ID_EMPLEADO),
     FOREIGN KEY(FK_ID_SUCURSAL) REFERENCES SUCURSAL(ID_SUCURSAL)

);


INSERT INTO VENTAS (FECHA_VENTA, SUB_TOTAL, TOTAL, FK_ID_EMPLEADO, FK_ID_DESCRIPCION_VENTAS, MEMBRESIA, FK_ID_SUCURSAL) VALuES
(NOW(), 0,0,367040,1,0,1);



INSERT INTO DESCRIPCION_VENTAS(FK_ID_PRODUCTO, UNIDADES) VALUES 
(1, 5), (2, 3), (3, 5), (4, 2), (5, 5), (6, 1), (7, 5), (8, 1), (9, 5), (10, 1), (11, 5), (12, 2), (13, 3), (14, 3), (15, 5), 
(16, 2), (17, 4), (18, 1), (19, 8), (19, 2), (20, 2), (21, 1), (22, 3), (23, 4), (24, 4), (25, 9), (26, 8), (27, 5), (28, 6), (29, 5);

DROP TABLE IF EXISTS DESCRIPCION_COMPRAS;
CREATE TABLE DESCRIPCION_COMPRAS(
    ID_DESCRIPCION_COMPRA INT NOT NULL AUTO_INCREMENT,
    FK_ID_PRODUCTO INT NOT NULL,
    UNIDADES INT NOT NULL DEFAULT 0,
    FK_ID_SUCURSAL INT NOT NULL DEFAULT 0,
    PRIMARY KEY(ID_DESCRIPCION_COMPRA, FK_ID_PRODUCTO, FK_ID_SUCURSAL),
    FOREIGN KEY(FK_ID_PRODUCTO) REFERENCES PRODUCTOS(ID_PRODUCTO),
    FOREIGN KEY(FK_ID_SUCURSAL) REFERENCES SUCURSAL(ID_SUCURSAL)
);

INSERT INTO DESCRIPCION_COMPRAS (FK_ID_PRODUCTO, UNIDADES, FK_ID_SUCURSAL) 
VALUES (2,4000,1),(4,2500,1),(5,4000,1),(6,2500,1),(9,4000,1),(10,2500,1);

DROP TABLE IF EXISTS COMPRAS;
CREATE TABLE COMPRAS(
    ID_COMPRA INT NOT NULL AUTO_INCREMENT,
    FECHA_COMPRA TIMESTAMP,
    TOTAL DOUBLE NOT NULL,
    FK_ID_DESCRIPCION_COMPRA INT NOT NULL,
    PRIMARY KEY(ID_COMPRA),
    FOREIGN KEY(FK_ID_DESCRIPCION_COMPRA) REFERENCES DESCRIPCION_COMPRAS(ID_DESCRIPCION_COMPRA)
);
INSERT INTO COMPRAS (FECHA_COMPRA, TOTAL, FK_ID_DESCRIPCION_COMPRA) 
VALUES (NOW(), 0, 1);
